<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Toast Popup Demo</title>
    <link rel="stylesheet" href="../src/toast.css" />
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin: 0; padding: 32px; background: #f5f7fb; color: #0f172a; }
      h1 { margin-top: 0; }
      .row { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; }
  .card { display: inline-block; vertical-align: top; background: #ffffff; padding: 16px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04); margin-bottom: 16px; border: 1px solid rgba(0,0,0,0.05); max-width: 100%; }
      button.demo { appearance: none; border: 0; border-radius: 10px; padding: 10px 14px; background: #2563eb; color: white; font-weight: 700; cursor: pointer; }
      button.secondary { background: #ffffff; color: #0f172a; border: 1px solid rgba(0,0,0,0.12); }
      label { display: block; margin: 10px 0 6px; }
      select, input { background: #ffffff; border: 1px solid rgba(0,0,0,0.15); color: #0f172a; border-radius: 8px; padding: 8px 10px; }

      /* Dark theme for demo surroundings */
      .theme-dark body { background: #0b0d12; color: #e8eaee; }
      .theme-dark .card { background: #0f1320; box-shadow: 0 10px 25px rgba(0,0,0,0.15); border: 1px solid #1c2230; }
      .theme-dark button.secondary { background: #2a2f3c; color: #d4d7de; border-color: #394158; }
      .theme-dark select, .theme-dark input { background: #0b0f1a; border: 1px solid #1c2230; color: #e8eaee; }
    </style>
  </head>
  <body>
    <h1>Toast Popup Demo</h1>
    <div class="card">
      <div class="row" style="align-items:center; margin-bottom: 12px;">
        <label for="theme">테마</label>
        <select id="theme">
          <option value="light">light</option>
          <option value="dark">dark</option>
        </select>
        <label for="pos">위치</label>
        <select id="pos">
          <option>top-right</option>
          <option>top-left</option>
          <option>bottom-right</option>
          <option>bottom-left</option>
          <option>top-center</option>
          <option>bottom-center</option>
        </select>
        <label for="dur">지속(ms)</label>
        <input id="dur" type="number" value="4000" step="500" style="width:120px" />
        <label style="display:inline-flex; align-items:center; gap:6px;">
          <input id="show-result" type="checkbox" checked /> 결과 메시지 표시
        </label>
      </div>
      <div class="row">
        <button class="demo" id="btn-info">Info</button>
        <button class="demo" id="btn-alert" style="background:#e11d48">Alert</button>
        <button class="demo" id="btn-confirm" style="background:#059669">Confirm</button>
        <button class="demo secondary" id="btn-many">10개 생성</button>
        <button class="demo secondary" id="btn-clear">모두 닫기</button>
      </div>
    </div>

    <script src="../src/toast.js"></script>
    <script>
      const posSel = document.getElementById('pos');
      const durInput = document.getElementById('dur');
      const themeSel = document.getElementById('theme');
      const showResult = document.getElementById('show-result');

      // Theme persistence
      const root = document.documentElement;
      const savedTheme = localStorage.getItem('demoTheme') || 'light';
      setTheme(savedTheme);
      themeSel.value = savedTheme;
      themeSel.addEventListener('change', (e) => setTheme(e.target.value));

      function setTheme(theme) {
        root.classList.toggle('theme-dark', theme === 'dark');
        localStorage.setItem('demoTheme', theme);
      }

      function getDuration() {
        const raw = (durInput.value || '').trim();
        if (raw === '') return 4000;
        const num = Number(raw);
        return Number.isNaN(num) ? 4000 : num;
      }

      document.getElementById('btn-info').addEventListener('click', () => {
        Toast.info('일반 정보 메시지입니다.', {
          title: '정보',
          position: posSel.value,
          duration: getDuration(),
        });
      });

      document.getElementById('btn-alert').addEventListener('click', () => {
        Toast.alert('중요한 경고 메시지입니다.', {
          title: '경고',
          position: posSel.value,
          duration: getDuration(),
        });
      });

      document.getElementById('btn-confirm').addEventListener('click', () => {
        Toast.confirm('이 작업을 진행할까요?', () => {
          if (showResult.checked) {
            Toast.info('확인을 선택했습니다.', { position: posSel.value });
          }
        }, () => {
          if (showResult.checked) {
            Toast.info('취소를 선택했습니다.', { position: posSel.value });
          }
        }, {
          title: '확인 필요',
          position: posSel.value,
          // confirm은 기본적으로 자동 닫힘 없음. 숫자를 넣으면 해당 시간 뒤 자동 취소됨.
          duration: getDuration(),
          okText: '네',
          cancelText: '아니오',
        });
      });

      document.getElementById('btn-many').addEventListener('click', () => {
        for (let i = 1; i <= 10; i++) {
          Toast.info(`메시지 ${i}`, { position: posSel.value, duration: 2500 });
        }
      });

      document.getElementById('btn-clear').addEventListener('click', () => {
        Toast.clear();
      });
    </script>
  </body>
</html>
